import{GraphQLError as r,Kind as e,print as t,parse as n}from"graphql";import{make as o}from"wonka";var a=e=>"string"==typeof e?new r(e):"object"==typeof e&&e.message?new r(e.message,e.nodes,e.source,e.positions,e.path,e,e.extensions||{}):e;class s extends Error{constructor(r){var e=(r.graphQLErrors||[]).map(a),t=((r,e)=>{var t="";if(r)return`[Network] ${r.message}`;if(e)for(var n of e)t&&(t+="\n"),t+=`[GraphQL] ${n.message}`;return t})(r.networkError,e);super(t),this.name="CombinedError",this.message=t,this.graphQLErrors=e,this.networkError=r.networkError,this.response=r.response}toString(){return this.message}}var i=(r,e)=>{for(var t="number"==typeof e?0|e:5381,n=0,o=0|r.length;n<o;n++)t=(t<<5)+t+r.charCodeAt(n);return t},f=new Set,l=new WeakMap,c=r=>{if(null===r||f.has(r))return"null";if("object"!=typeof r)return JSON.stringify(r)||"";if(r.toJSON)return c(r.toJSON());if(Array.isArray(r)){var e="[";for(var t of r)"["!==e&&(e+=","),e+=(t=c(t)).length>0?t:"null";return e+"]"}var n=Object.keys(r).sort();if(!n.length&&r.constructor&&r.constructor!==Object){var o=l.get(r)||Math.random().toString(36).slice(2);return l.set(r,o),`{"__key":"${o}"}`}f.add(r);var a="{";for(var s of n){var i=c(r[s]);i&&(a.length>1&&(a+=","),a+=c(s)+":"+i)}return f.delete(r),a+"}"},u=r=>(f.clear(),c(r)),d=/("{3}[\s\S]*"{3}|"(?:\\.|[^"])*")/g,p=/(#[^\n\r]+)?(?:\n|\r\n?|$)+/g,h=(r,e)=>e%2==0?r.replace(p,"\n"):r,v=r=>{var e=(r=>r.split(d).map(h).join("").trim())("string"==typeof r?r:r.loc&&"gql"===r.loc.source.name?r.loc.source.body:t(r));return"string"==typeof r||r.loc||(r.loc={start:0,end:e.length,source:{body:e,name:"gql",locationOffset:{line:1,column:1}}}),e},y=r=>{var e=i(v(r));if("object"==typeof r&&"definitions"in r){var t=b(r);t&&(e=i(`\n# ${t}`,e))}return e},g=new Map,x=r=>{var e,t;return"string"==typeof r?(e=y(r),t=g.get(e)||n(r,{noLocation:!0})):(e=r.__key||y(r),t=g.get(e)||r),t.loc||v(t),t.__key=e,g.set(e,t),t},m=(r,e)=>{e||(e={});var t=x(r),n=u(e),o=t.__key;return"{}"!==n&&(o=i(n,o)),{key:o,query:t,variables:e}},b=r=>{for(var t of r.definitions)if(t.kind===e.OPERATION_DEFINITION&&t.name)return t.name.value},w=r=>{for(var t of r.definitions)if(t.kind===e.OPERATION_DEFINITION)return t.operation},O=(r,e,t)=>{if(!("data"in e)&&!("errors"in e)||"path"in e)throw new Error("No Content");return{operation:r,data:e.data,error:Array.isArray(e.errors)?new s({graphQLErrors:e.errors,response:t}):void 0,extensions:"object"==typeof e.extensions&&e.extensions||void 0,hasNext:!!e.hasNext}},N=(r,e,t)=>{var n={...r};if(n.hasNext=!!e.hasNext,!("path"in e))return"data"in e&&(n.data=e.data),n;Array.isArray(e.errors)&&(n.error=new s({graphQLErrors:n.error?[...n.error.graphQLErrors,...e.errors]:e.errors,response:t}));for(var o,a=n.data={...n.data},i=0;i<e.path.length;)a=a[o=e.path[i++]]=Array.isArray(a[o])?[...a[o]]:{...a[o]};return Object.assign(a,e.data),n},E=(r,e,t)=>({operation:r,data:void 0,error:new s({networkError:e,response:t}),extensions:void 0});function k(r){return{query:v(r.query),operationName:b(r.query),variables:r.variables||void 0,extensions:void 0}}var S=(r,e)=>{var t="query"===r.kind&&r.context.preferGetMethod;if(!t||!e)return r.context.url;var n=new URL(r.context.url),o=n.searchParams;e.operationName&&o.set("operationName",e.operationName),e.query&&o.set("query",e.query),e.variables&&o.set("variables",u(e.variables)),e.extensions&&o.set("extensions",u(e.extensions));var a=n.toString();return a.length>2047&&"force"!==t?(r.context.preferGetMethod=!1,r.context.url):a},q=(r,e)=>{var t="query"===r.kind&&!!r.context.preferGetMethod,n={accept:"application/graphql+json, application/json"};t||(n["content-type"]="application/json");var o=("function"==typeof r.context.fetchOptions?r.context.fetchOptions():r.context.fetchOptions)||{};if(o.headers)for(var a in o.headers)n[a.toLowerCase()]=o.headers[a];return{...o,body:!t&&e?JSON.stringify(e):void 0,method:t?"GET":"POST",headers:n}},j="undefined"!=typeof TextDecoder?new TextDecoder:null,A=/content-type:[^\r\n]*application\/json/i,T=/boundary="?([^=";]+)"?/i,I=(r,e,t)=>{var n="manual"===t.redirect?400:300,a=r.context.fetch;return o((({next:o,complete:s})=>{var i="undefined"!=typeof AbortController?new AbortController:null;i&&(t.signal=i.signal);var f,l=!1,c=!1,u=!1;return Promise.resolve().then((()=>{if(!c)return(a||fetch)(e,t)})).then((e=>{if(e)return u=(f=e).status<200||f.status>=n,((r,e,t)=>{var n=t.headers&&t.headers.get("Content-Type")||"";if(/text\//i.test(n))return t.text().then((n=>{r(E(e,new Error(n),t))}));if(!/multipart\/mixed/i.test(n))return t.text().then((n=>{r(O(e,JSON.parse(n),t))}));var o,a="---",s=n.match(T);s&&(a="--"+s[1]);var i=()=>{};if(t[Symbol.asyncIterator]){var f=t[Symbol.asyncIterator]();o=f.next.bind(f)}else{if(!("body"in t)||!t.body)throw new TypeError("Streaming requests unsupported");var c=t.body.getReader();i=()=>c.cancel(),o=()=>c.read()}var u="",d=!0,p=null,h=null;return o().then((function n(s){if(s.done)l=!0;else{var i="Buffer"===(b=s.value).constructor.name?b.toString():j.decode(b),f=i.indexOf(a);for(f>-1?f+=u.length:f=u.indexOf(a),u+=i;f>-1;){var c=u.slice(0,f),v=u.slice(f+a.length);if(d)d=!1;else{var y=c.indexOf("\r\n\r\n")+4,g=c.slice(0,y),x=c.slice(y,c.lastIndexOf("\r\n")),m=void 0;if(A.test(g))try{m=JSON.parse(x),p=h=h?N(h,m,t):O(e,m,t)}catch(r){}if("--"===v.slice(0,2)||m&&!m.hasNext){if(!h)return r(O(e,{},t));break}}f=(u=v).indexOf(a)}}var b;if(p&&(r(p),p=null),!s.done&&(!h||h.hasNext))return o().then(n)})).finally(i)})(o,r,f)})).then(s).catch((e=>{if(l)throw e;var t=E(r,u&&f.statusText?new Error(f.statusText):e,f);o(t),s()})),()=>{c=!0,i&&i.abort()}}))};export{s as C,E as a,k as b,S as c,q as d,I as e,m as f,w as g,u as h,N as i,b as j,x as k,O as m,v as s};
//# sourceMappingURL=b1e9e3d1.min.mjs.map
